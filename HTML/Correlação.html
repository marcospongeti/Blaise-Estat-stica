<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Blaise - C&R</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/styles.min.css">
</head>

<body>
    <!-- Modal -->
<div class="modal fade" id="corEpro" tabindex="-1" role="dialog" aria-labelledby="TituloModalLongoExemplo" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
          <div class="modal-content">
            <div class="modal-header">
                    <h4 style="text-align: center">Correlação / Regressão</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                    
                    <br>
                    <div class="row">
                        <div class="input-field col s1">
                            <label>X</label>
                            <input type="text" name="X" id="cr_x">
                        </div>
                        <div class="input-field col s1">
                            <label>Y</label>
                            <input type="text" name="Y" id="cr_y">
                        </div>
                        <div class="col s3">
                            <br>
                            <button class="btn blue" onclick="pushRow()">Adicionar na Tabela</button>
                        </div>
                    </div>
                    <br>
                    <button class="btn blue" onclick="calcularCorrelacao()">Calcular</button>
                    <br>
                    <br>
                    <div id="resultadoCR"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
              
            </div>
          </div>
        </div>
      </div>
    <nav class="navbar navbar-light navbar-expand-md navigation-clean-search">
        <div class="container"><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button><img src="assets/img/logo1.jpg">
            <div class="intro">
                <h2 class="text-center"><em>Correlação &amp; Regressão</em></h2>
                <p class="text-center">Blaise é uma excelente ferramenta para análise estatística de dados, insira os dados e receba os resultados para lhe auxiliar em suas análises e interpretações dos resultados nas suas decisões</p>
            </div>
            <div class="dropdown"><a class="dropdown-toggle active" data-toggle="dropdown" aria-expanded="false" href="#">Tipo de Analise</a>
                <div class="dropdown-menu" role="menu"><a class="dropdown-item active" role="presentation" href="Index.html">Página Inicial</a><a class="dropdown-item" role="presentation" href="Descritiva.html">Estatística Descritiva</a><a class="dropdown-item" role="presentation" href="Probabilidade.html">Probabilidade</a></div>
            </div>
            <ul class="nav navbar-nav">
                <li class="nav-item" role="presentation"></li>
                <li class="nav-item" role="presentation"></li>
                <li class="nav-item" role="presentation"></li>
            </ul>
            <div class="collapse navbar-collapse" id="navcol-1"></div>
        </div>
    </nav>
    <div class="article-list">
        <div class="container">
            <div class="row articles">
                <div class="col-sm-6 col-md-4 item"><a href="#"></a>
                    <p class="text-white description">Obtenha análise Discreta ou Contínua</p><a class="action" href="#"></a></div>
                <div class="col-sm-6 col-md-4 item"><a href="#"><img class="img-fluid" src="assets/img/Correlação2.jpg"></a>
                    <h3 class="name">Correlação &amp; Regressão</h3><a class="action" href="#"></a><button class="btn btn-primary" type="button" data-toggle="modal" data-target="#corEpro">Calcule</button></div>
                <div class="col-sm-6 col-md-4 item"><a href="#"></a>
                    <p class="text-light description">Otenha Correlação e &nbsp;Regressão entre as variáveis</p><a class="action" href="#"></a></div>
            </div>
        </div>
    </div>
    <div class="team-clean"></div>
    <div class="footer-basic">
        <footer>
            <p class="copyright">Blaise© 2019</p>
        </footer>
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
</body>
<script>
    $(function () {
        $('#btnD2').on('click', montaTabelaD.bind(this));
        $('#btnAmostra').on('click', getAmostra.bind(this));
        $('#btnExtrat').on('click', getExtratificadaProp.bind(this));
        $('#btnC2').on('click', montaTabelaC.bind(this));

        this.divDiscreta = $('#collapseDiscreta');
        this.divAmostra = $("#collapseAmostra");
        this.divExt = $("#collapseTabExtratificada");
        this.divContinua = $('#collapseContinua');
    });

    function getAmostra() {
        if (!(v_erro > 0) || !(v_populacao > 0)) {
            alert("Erro, Favor informar a População e o Erro!");
            this.divAmostra.collapse('hide');
        } else {
            this.divAmostra.collapse('show');
            v_amostra = calculaAmostraErro(v_populacao, v_erro);
            document.getElementById("Amostra").value = v_amostra;

            //zera as variaveis para forçar calcular novamente
            v_aleatoriaSimples.splice(0, v_aleatoriaSimples.length);
            v_sistematica.splice(0, v_sistematica.length);
            v_extratificada.splice(0, v_extratificada.length);
        }
    }

    function getAleatoriaSimples() {
        //verifica se ja foi gerado
        if (!(v_aleatoriaSimples.length > 0)) {
            v_aleatoriaSimples = aleatoriaSimples(v_populacao, v_amostra);
            var col = 10;
            insert = " <div class = 'row'><div class = 'col-lg-1'> </div> <div class 'col-lg-11'><h3> Tabela de Aleatórios </h3> </div> </div>";
            insert += " <table class = \"table table-striped\"> <tr> ";

            for (var i = 0; i < col; i++) {
                insert += "<th>Aleatório</th>";
            }
            insert += "</tr>";
            for (var i = 0; i < v_aleatoriaSimples.length; i++) {
                insert += "<tr>";
                for (var j = 0; j < col; j++) {
                    insert += "<td>" + v_aleatoriaSimples[i + j] + "</td>";
                }
                insert += "</tr>";
                i += (col - 1);
            }
            insert += "</table>";
            document.getElementById("AleatoriaSimples").innerHTML = insert;
        }
    }

    function getExtratificadaProp() {
        if (validaExtratos(v_valoresExtrato, v_populacao)) {
            //verifica se ja foi gerado
            if (!(v_extratificada.length > 0)) {
                this.divExt.collapse('show');
                v_proporcao = propExtratos(v_valoresExtrato,
                    v_populacao);
                v_extratificada = extratificadaProp(v_proporcao, v_populacao, v_amostra);
                insert = "<h3> Tabela de Proporções</h3>"
                insert += "<table class='table table-striped'> <tr> ";
                insert += " <th> Extrato </th><th>Percentual</th> <th> Quantidade </th>";
                insert += "</tr>";
                for (var i = 0; i < v_proporcao.length; i++) {
                    insert += "<tr><td>" + v_extratificada[i][0] + "</td><td>" + v_extratificada[i][1] + "</td><td>" + v_extratificada[i][2] + "</td></tr>";
                }
                insert += "</table>";
                document.getElementById("ExtratificadaProp").innerHTML = insert;
            }
        } else {
            this.divExt.collapse('hide');
            swal("Erro", "Total dos Extratos não bate com a população!", "error");
        }
    }

    function getSistematica() {
        if (!(v_sistematica.length > 0)) {
            v_sistematica = sistematica(v_amostra, v_populacao);
            var col = 10;
            insert = "<h3> Tabela Sistematica</h3>";
            insert += "<table class='table table-striped'> <tr> ";
            for (var i = 0; i < col; i++) {
                insert += " <th> Aleatório </th>";
            }
            insert += "</tr> ";
            for (var i = 0; i < v_sistematica.length; i++) {
                insert += "<tr>";
                for (var j = 0; j < col; j++) {
                    insert += "<td>" + v_sistematica[i + j] + "</td>";
                }
                insert += "</tr>";
                i += (col - 1);
            }
            insert += "</table>";
            document.getElementById("Sistematica").innerHTML = insert;
        }
    }

    function montaTabelaD() {
        //verifica se ja foi gerado
        if (!(v_valores.length > 0)) {
            swal("Erro", "Favor informar valores de Variavel!", "error");
            this.divDiscreta.collapse('hide');
        } else {
            if (!(v_tabelaDiscreta.length > 0)) {
                this.divDiscreta.collapse('show');

                //calcula a tabela, monta o html e insere com o innerhtml 
                v_tabelaDiscreta = tabelaQuantDiscreta(v_valores);
                var titulos = ["Variavel", "Frequencia", "FR%", "F", "F%"];
                inserttabD = "<h3> Tabela Discreta </h3>";
                inserttabD += "<table class='table table-striped'><tr>";
                for (var i = 0; i < titulos.length; i++) {
                    inserttabD += "<th>" + titulos[i] +
                        "</th>";
                }
                inserttabD += "</tr>";
                for (var i = 0; i < v_tabelaDiscreta.length; i++) {
                    inserttabD += "<tr>";
                    for (var j = 0; j < v_tabelaDiscreta[i].length; j++) {
                        inserttabD += "<td>" + v_tabelaDiscreta[i][j] + "</td>";
                    }
                    inserttabD += "</tr>";
                }
                inserttabD
                    += "</table>";
            }
            document.getElementById("tabelaDiscreta").innerHTML = inserttabD;
        }
    }

    function montaValoresD() {
        //calcula a media 
        mediaPonderada = mediaPonderadaVarDisc(v_tabelaDiscreta);
        //calcula a mediana 
        mediana = medianaVarDisc(v_valores);
        //calcula a variancia 
        variancia1 = variancia(v_tabelaDiscreta, mediaPonderada, rdPopulacao.checked);
        //calcula o desvio padrão
        desvPadrao = DesvioPadrao(variancia1, mediaPonderada);
        //calcula a moda
        moda = modaVarDis(v_tabelaDiscreta);

        var resultados = "<h3> Valores </h3> <br />";
        resultados += "<div class='row'>";
        resultados += "<div class='col-sm-12 col-md-12 col-lg-12'>";
        resultados += "<div class='col'>";
        resultados += "<label style='color: black; font-size: 1rem;'><b>Média Ponderada:</b> " + mediaPonderada + "</label>";
        resultados += "</div>";
        resultados += "<div class='col'>";
        resultados += "<label style='color: black; font-size: 1rem;'><b>Mediana:</b> " + mediana + "</label>";
        resultados += "</div>";
        resultados += "<div class='col'>";
        resultados += "<label style='color: black; font-size: 1rem;'><b>Variancia:</b> " + variancia1.toFixed(2) + "</label>";
        resultados += "</div>";
        resultados += "</div>";
        resultados += "</div>";


        var titulos1 = ["Variavel", "Frequencia"];
        resultados += "<h3> Moda </h3>";
        resultados += " <div class='col-lg-4'> <table class='table table-striped'><tr>";
        for (var i = 0; i < titulos1.length; i++) {
            resultados += "<th>" + titulos1[i] + "</th>";
        }
        resultados += "</tr>";
        for (var i = 0; i < moda.length; i++) {
            resultados += "<tr>";
            for (var j = 0; j < moda[i].length; j++) {
                resultados += "<td>" + moda[i][j] + "</td>";
            }
            resultados += "</tr>";
        }
        resultados += "</table> </div>";

        var titulos2 = ["Valor", "Percentual"];
        resultados += "<h3> Desvio Padrão </h3>";
        resultados += "<div class='col-lg-4'><table class='table table-striped'> <tr> ";
        for (var i = 0; i < titulos2.length; i++) {
            resultados += "<th>" + titulos2[i] + "</th>";
        }
        resultados += "</tr>";
        for (var i = 0; i < desvPadrao.length; i++) {
            resultados += "<tr>";
            for (var j = 0; j < desvPadrao[i].length; j++) {
                resultados += "<td>" + desvPadrao[i][j].toFixed(2) +
                    "</td>";
            }
            resultados += "</tr>";
        }
        resultados += "</table></div>";


        document.getElementById("tabelaDiscreta").innerHTML = resultados;
    }

    function montaModaD() {
        //calcula a moda, monta a tabela e insere o html 
        moda = modaVarDis(v_tabelaDiscreta);

        insert = "";
        var titulos = ["Variavel", "Frequencia"];
        insert = "<h3> Moda </h3>";
        insert += " <div class='col-lg-4'> <table class='table table-striped'><tr>";
        for (var i = 0; i < titulos.length; i++) {
            insert += "<th>" + titulos[i] + "</th>";
        }
        insert += "</tr>";
        for (var i = 0; i < moda.length; i++) {
            insert += "<tr>";
            for (var j = 0; j < moda[i].length; j++) {
                insert += "<td>" + moda[i][j] + "</td>";
            }
            insert += "</tr>";
        }
        insert += "</table> </div>";
        document.getElementById("tabelaDiscreta").innerHTML = insert;
    }

    function montaDesvioD() {
        //calcula o desvio padrão, monta a tabelae insere o html 
        desvPadrao = DesvioPadrao(variancia1, mediaPonderada);
        var titulos = ["Valor", "Percentual"];
        insert = "<h3> Desvio Padrão </h3>";
        insert += "<div class='col-lg-4'><table class='table table-striped'> <tr> ";
        for (var i = 0; i < titulos.length; i++) {
            insert += "<th>" + titulos[i] + "</th>";
        }
        insert += "</tr>";
        for (var i = 0; i < desvPadrao.length; i++) {
            insert += "<tr>";
            for (var j = 0; j < desvPadrao[i].length; j++) {
                insert += "<td>" + desvPadrao[i][j] +
                    "</td>";
            }
            insert += "</tr>";
        }
        insert += "</table></div>";
        document.getElementById("tabelaDiscreta").innerHTML = insert;
    }

    function montaTabelaC() {
        if (!(v_valores.length > 0)) {
            swal("Erro", "Favor informar valores de Variavel!", "error");
            this.divContinua.collapse('hide');
        } else {
            if (!(v_tabelaContinua.length > 0)) {
                this.divContinua.collapse('show');
                //calcula a tabela continua, monta o html e insere 

                v_tabelaContinua = tabelaQuantContinua(v_valores);
                titulos = ["Classes", "Intervalo de Classes", "Frequencia Simples", "FR%", "F", "F%", "(min + max)/2"];
                inserttabC = "<h3> Tabela Continua </h3>";
                inserttabC += "<table  class='table table-striped'><thead>";
                for (var i = 0; i < titulos.length; i++) {
                    inserttabC += "<th>" + titulos[i] + "</th>";
                }
                inserttabC += "</thead><tbody>";
                for (var i = 0; i < v_tabelaContinua.length; i++) {
                    inserttabC += "<tr>";
                    for (var j = 0; j < v_tabelaContinua[i].length; j++) {
                        if (j == 1) {
                            inserttabC += "<td>" + v_tabelaContinua[i][1] + v_tabelaContinua[i][2] + v_tabelaContinua[i][3] + "</td>";
                            j += 2;
                        } else {
                            inserttabC += "<td>" + v_tabelaContinua[i][j] + "</td>";
                        }
                    }
                    inserttabC += "</tr>";
                }
                inserttabC += "</tbody></table>";
                document.getElementById("tabelaContinua").innerHTML = inserttabC;
            }
        }
    }

    function montaValoresC() {
        //calcula media, mediana, variancia, e monta tabela 
        mediaPonderada2 = mediaVarContinua(v_tabelaContinua, v_valores.length);
        mediana2 = medianaVarCont(v_tabelaContinua, v_valores);
        moda2 = modaConvVarCont(v_tabelaContinua);
        modaK = modaKing(v_tabelaContinua);
        modaCz = modaCzuber(v_tabelaContinua);
        modaP = modaPearson(mediana2, mediaPonderada2);

        v_tabelaDiscreta = tabelaQuantDiscreta(v_valores);
        variancia2 = variancia(v_tabelaDiscreta, mediaPonderada2, rdPopulacao.checked);
        v_tabelaDiscreta.splice(0, v_tabelaDiscreta.length);

        //monta tabela valores 
        var titulos1 = ["Média Ponderada", "Mediana", "Variancia"];
        insert = "<h3> Valores </h3>";
        insert += "<div class='col-lg-6'><table class='table table-striped'> <tr> ";
        for (var i = 0; i < titulos1.length; i++) {
            insert += " <th> " + titulos1[i] + " </th>";
        }
        insert += "</tr> <tr> ";
        insert += " <td> " + mediaPonderada2 + " </td>";
        insert += "<td>" + mediana2 + "</td>";
        insert += "<td>" + variancia2 + "</td>";
        insert += "</tr></table></div>";
        insert += "<br/>";
        var titulos2 = ["Classe", "Frequencia", "Ponto Médio"];
        insert += "<br />";
        insert += "<h3> Moda </h3>";
        insert += "<div class='row'> <div class='col-lg-4'> <table class='table table-striped'><tr>";
        for (var i = 0; i < titulos2.length; i++) {
            insert += "<th>" + titulos2[i] + "</th>";
        }
        insert += "</tr>";
        for (var i = 0; i < moda2.length; i++) {
            insert += "<tr>";
            for (var j = 0; j < moda2[i].length; j++) {
                insert += "<td>" + moda2[i][j] + "</td>";
            }
            insert += "</tr>";
        }
        insert += "</table> </div></div>";
        insert += "<br/>";
        var titulos4 = ["Valor", "Percentual"];
        insert += "<h3> Desvio Padrão </h3>";
        insert += " <div class='row'><div class='col-lg-4'><table class='table table-striped'> <tr> ";
        for (var i = 0; i < titulos4.length; i++) {
            insert += " <th> " + titulos4[i] +
                "</th>";
        }
        insert += "</tr>";
        for (var i = 0; i < desvPadrao2.length; i++) {
            insert += "<tr>";
            for (var j = 0; j < desvPadrao2[i].length; j++) {
                insert += "<td>" + desvPadrao2[i][j] + "</td>";
            }
            insert += "</tr>";
        }
        insert += "</table></div></div>";
        document.getElementById("tabelaContinua").innerHTML = insert;
    }
    
    var table = new Array();

    table.push([0.0000, 0.0040, 0.0080, 0.0120, 0.0160, 0.0199, 0.0239, 0.0279, 0.0319, 0.0359]);
    table.push([0.0398, 0.0438, 0.0478, 0.0517, 0.0557, 0.0596, 0.0636, 0.0675, 0.0714, 0.0753]);
    table.push([0.0793, 0.0832, 0.0871, 0.0910, 0.0948, 0.0987, 0.1026, 0.1064, 0.1103, 0.1141]);
    table.push([0.1179, 0.1217, 0.1255, 0.1293, 0.1331, 0.1368, 0.1406, 0.1443, 0.1480, 0.1517]);
    table.push([0.1554, 0.1591, 0.1628, 0.1664, 0.1700, 0.1736, 0.1772, 0.1808, 0.1844, 0.1879]);
    table.push([0.1915, 0.1950, 0.1985, 0.2019, 0.2054, 0.2088, 0.2123, 0.2157, 0.2190, 0.2224]);
    table.push([0.2257, 0.2291, 0.2324, 0.2357, 0.2389, 0.2422, 0.2454, 0.2486, 0.2517, 0.2549]);
    table.push([0.2580, 0.2611, 0.2642, 0.2673, 0.2703, 0.2734, 0.2764, 0.2794, 0.2823, 0.2852]);
    table.push([0.2881, 0.2910, 0.2939, 0.2967, 0.2995, 0.3023, 0.3051, 0.3078, 0.3106, 0.3133]);
    table.push([0.3159, 0.3186, 0.3212, 0.3238, 0.3264, 0.3289, 0.3315, 0.3340, 0.3365, 0.3389]);
    table.push([0.3413, 0.3438, 0.3461, 0.3485, 0.3508, 0.3531, 0.3554, 0.3577, 0.3599, 0.3621]);
    table.push([0.3643, 0.3665, 0.3686, 0.3708, 0.3729, 0.3749, 0.3770, 0.3790, 0.3810, 0.3830]);
    table.push([0.3849, 0.3869, 0.3888, 0.3907, 0.3925, 0.3944, 0.3962, 0.3980, 0.3997, 0.4015]);
    table.push([0.4032, 0.4049, 0.4066, 0.4082, 0.4099, 0.4115, 0.4131, 0.4147, 0.4162, 0.4177]);
    table.push([0.4192, 0.4207, 0.4222, 0.4236, 0.4251, 0.4265, 0.4279, 0.4292, 0.4306, 0.4319]);
    table.push([0.4332, 0.4345, 0.4357, 0.4370, 0.4382, 0.4394, 0.4406, 0.4418, 0.4429, 0.4441]);
    table.push([0.4452, 0.4463, 0.4474, 0.4484, 0.4495, 0.4505, 0.4515, 0.4525, 0.4535, 0.4545]);
    table.push([0.4554, 0.4564, 0.4573, 0.4582, 0.4591, 0.4599, 0.4608, 0.4616, 0.4625, 0.4633]);
    table.push([0.4641, 0.4649, 0.4656, 0.4664, 0.4671, 0.4678, 0.4686, 0.4693, 0.4699, 0.4706]);
    table.push([0.4713, 0.4719, 0.4726, 0.4732, 0.4738, 0.4744, 0.4750, 0.4756, 0.4761, 0.4767]);
    table.push([0.4772, 0.4778, 0.4783, 0.4788, 0.4793, 0.4798, 0.4803, 0.4808, 0.4812, 0.4817]);
    table.push([0.4821, 0.4826, 0.4830, 0.4834, 0.4838, 0.4842, 0.4846, 0.4850, 0.4854, 0.4857]);
    table.push([0.4861, 0.4864, 0.4868, 0.4871, 0.4875, 0.4878, 0.4881, 0.4884, 0.4887, 0.4890]);
    table.push([0.4893, 0.4896, 0.4898, 0.4901, 0.4904, 0.4906, 0.4909, 0.4911, 0.4913, 0.4916]);
    table.push([0.4918, 0.4920, 0.4922, 0.4925, 0.4927, 0.4929, 0.4931, 0.4932, 0.4932, 0.4936]);
    table.push([0.4938, 0.4940, 0.4941, 0.4943, 0.4945, 0.4946, 0.4948, 0.4949, 0.4951, 0.4952]);
    table.push([0.4953, 0.4955, 0.4956, 0.4957, 0.4959, 0.4960, 0.4961, 0.4962, 0.4963, 0.4964]);
    table.push([0.4965, 0.4966, 0.4967, 0.4968, 0.4969, 0.4970, 0.4971, 0.4972, 0.4973, 0.4974]);
    table.push([0.4974, 0.4975, 0.4967, 0.4977, 0.4977, 0.4978, 0.4979, 0.4979, 0.4980, 0.4981]);
    table.push([0.4981, 0.4982, 0.4982, 0.4983, 0.4984, 0.4984, 0.4985, 0.4985, 0.4986, 0.4986]);
    table.push([0.4987, 0.4987, 0.4987, 0.4988, 0.4988, 0.4989, 0.4989, 0.4989, 0.4990, 0.4990]);
    table.push([0.4990, 0.4991, 0.4991, 0.4991, 0.4992, 0.4992, 0.4992, 0.4992, 0.4993, 0.4993]);
    table.push([0.4993, 0.4993, 0.4994, 0.4994, 0.4994, 0.4994, 0.4994, 0.4995, 0.4995, 0.4995]);
    table.push([0.4995, 0.4995, 0.4995, 0.4996, 0.4996, 0.4996, 0.4996, 0.4996, 0.4996, 0.4997]);
    table.push([0.4997, 0.4997, 0.4997, 0.4997, 0.4997, 0.4997, 0.4997, 0.4997, 0.4997, 0.4998]);
    table.push([0.4998, 0.4998, 0.4998, 0.4998, 0.4998, 0.4998, 0.4998, 0.4998, 0.4998, 0.4998]);
    table.push([0.4998, 0.4998, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999]);
    table.push([0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999]);
    table.push([0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999]);
    table.push([0.5000, 0.5000, 0.5000, 0.5000, 0.5000, 0.5000, 0.5000, 0.5000, 0.5000, 0.5000]);


    function getValue(num) {
        value = Math.abs(num).toString();
        for (i = value.length; i <= 4; i++) {
            value = value + "0";
        }
        array = value.split('');
        index = parseInt(array[0] + array[2]);
        column = parseInt(array[3]);
        if (index > 38) {
            return 0.5000;
        }

        return table[index][column];
    }

    function getParams(num) {
        value = Math.abs(num);
        retorno = '';


        if (value >= 0.5) {
            return 3.9;
        } else {
            for (var index = 0; index < table.length; index++) {
                if (retorno != "") {
                    break;
                }
                for (var column = 0; column < table[index].length; column++) {
                    if (value <= table[index][column]) {
                        str = index.toString();
                        array = str.split('');
                        if (array.length == 1) {
                            array.unshift('0');
                        }

                        if (value < table[index][column]) {
                            retorno = array[0] + '.' + array[1] + (column - 1);

                        } else {
                            retorno = array[0] + '.' + array[1] + column;
                        }
                        break;
                    }
                }
            }
            return parseFloat(retorno);
        }
    }

    function imprimeTabela() {
        var titulos = ["Coluna", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];
        insert = "<table class='table table-striped'><tr>";
        for (var i = 0; i < titulos.length; i++) {
            insert += "<th>" + titulos[i] +
                "</th>";
        }
        insert += "</tr>";
        for (var i = 0; i < table.length; i++) {
            insert += "<tr>";
            insert += "<td>" + i + "</td>";
            for (var j = 0; j < table[i].length; j++) {
                insert += "<td>" + table[i][j] + "</td>";
            }
            insert += "</tr>";
        }
        insert += "</table>";

        return insert;
    };

    function calculaDistribuicaoNormal() {

        var media = parseFloat(document.getElementById("dn_media").value);
        var desvioPadrao = parseFloat(document.getElementById("dn_desvio_padrao").value);
        var maiorQ = parseFloat(document.getElementById("dn_maior").value);
        var menorQ = parseFloat(document.getElementById("dn_menor").value);
        var tipo = "";
        $('input:radio[name=dn_radio]').each(function () {
            if ($(this).is(':checked'))
                tipo = parseInt($(this).val());
        });


        if (tipo == 0) { //maior que
            if (maiorQ < media) {
                var valor = (0.5 + getValue((maiorQ - media) / desvioPadrao)) * 100;
            } else {
                var valor = (0.5 - getValue((maiorQ - media) / desvioPadrao)) * 100;
            }
        } else if (tipo == 1) { //menor que
            if (menorQ < media) {
                var valor = (0.5 - getValue((menorQ - media) / desvioPadrao)) * 100;
            } else {
                var valor = (0.5 + getValue((menorQ - media) / desvioPadrao)) * 100;
            }
        } else { //entre
            var valor1 = getValue((maiorQ - media) / desvioPadrao);
            var valor2 = getValue((menorQ - media) / desvioPadrao);
            if (((menorQ < media) && (maiorQ < media)) || ((menorQ > media) && (maiorQ > media))) {
                valor = (valor1 - valor2) * 100;
            } else {
                valor = (valor1 + valor2) * 100;
            }
        }
        document.getElementById("resultadoDN").innerHTML = Math.abs(valor);
    }

    function calculaDistribuicaoBinomial() {
        var p = parseFloat(document.getElementById("db_p").value);
        var k = parseFloat(document.getElementById("db_k").value);
        var q = parseFloat(document.getElementById("db_q").value);
        var n = parseFloat(document.getElementById("db_n").value);

        numero = (fatorial(n) / (fatorial(k) * (fatorial(n - k)))) * Math.pow(p, k) * Math.pow(q, (n - k));

        document.getElementById("resultadoBn").innerHTML = ((numero * 100).toFixed(2) + "%");
    }

    function calculaDistribuicaoPoisson() {

        var Ni = document.getElementById("dp_ni").value;
        var x = document.getElementById("dp_x").value;
        var tipo = "";
        $('input:radio[name=dp_radio]').each(function () {
            //Verifica qual está selecionado
            if ($(this).is(':checked'))
                tipo = parseInt($(this).val());
        });
        var total = 0;

        if (tipo == 0) { //valor especifico
            total = distribuicaoPoisson(Ni, x);
        } else { //de 0 a um valor especifico
            for (var i = 0; i <= x; i++) {
                total += distribuicaoPoisson(Ni, i);
            }
        }
        document.getElementById("resultadoDP").innerHTML = total * 100;
    }

    function distribuicaoPoisson(Ni, x) {
        return ((Math.pow(Ni, x) * Math.pow(2.71828, -Ni)) / fatorial(x));
    }

    function fatorial(x) {
        if (x < 0) {
            return -1;
        } else if (x == 0) {
            return 1
        } else {
            return x * fatorial(x - 1);
        }
    }

    function calculaIntervaloConfianca() {
        var n = parseFloat(document.getElementById("ic_populacao").value);
        var p = parseFloat(document.getElementById("ic_populacao_total").value);

        var populacaoTotal = false;

        if (!isNaN(p)) {
            populacaoTotal = true;
        }

        var media = parseFloat(document.getElementById("ic_media").value);
        var desvioPadrao = parseFloat(document.getElementById("ic_desvio_padrao").value);
        var intervaloConfianca = parseFloat(document.getElementById("ic_intervalo").value);

        var erroPadrao = getParams(intervaloConfianca / 2 / 100);

        var valor = erroPadrao * (desvioPadrao / (Math.sqrt(n)));
        if (populacaoTotal) {
            var fatorCorrecao = (p - n) / (p - 1);
            valor += fatorCorrecao;
        }
        var result = "valor final: " + valor + "<br>";
        result += "inicio intervalo: " + (media - valor) + "<br>";
        result += "final intervalo: " + (media + valor);
        document.getElementById("resultadoIC").innerHTML = result;
    }

    var tabela = new Array();
    var total0 = 0;
    var total1 = 0;
    var total2 = 0;
    var total3 = 0;
    var total4 = 0;

    function pushRow() {
        tabela.push([parseFloat(document.getElementById("cr_x").value), parseFloat(document.getElementById("cr_y").value)]);
        tabela[tabela.length - 1][2] = tabela[tabela.length - 1][0] * tabela[tabela.length - 1][1];
        tabela[tabela.length - 1][3] = Math.pow(tabela[tabela.length - 1][0], 2);
        tabela[tabela.length - 1][4] = Math.pow(tabela[tabela.length - 1][1], 2);
        total0 += tabela[tabela.length - 1][0];
        total1 += tabela[tabela.length - 1][1];
        total2 += tabela[tabela.length - 1][2];
        total3 += tabela[tabela.length - 1][3];
        total4 += tabela[tabela.length - 1][4];
        document.getElementById("resultadoCR").innerHTML = mostrarTabela();
    }

    function mostrarTabela() {
        var titulos = ["x", "y", "x*y", "x²", "y²"];
        insert = " <div class='row'><div class='col-lg-4'><table class='table table-striped'> <tr> ";
        for (var i = 0; i < titulos.length; i++) {
            insert += " <th> " + titulos[i] + "</th>";
        }
        insert += "</tr>";
        for (var i = 0; i < tabela.length; i++) {
            insert += "<tr>";
            for (var j = 0; j < tabela[i].length; j++) {
                insert += "<td>" + tabela[i][j] + "</td>";
            }
            insert += "</tr>";
        }
        insert += "</table></div></div>";
        return insert;
    }


    function calcularCorrelacao() {

        tabela.push([total0, total1, total2, total3, total4]);

        var n = tabela.length - 1; //periodo
        var primeiraParte = n * tabela[tabela.length - 1][2] - (tabela[tabela.length - 1][0] * tabela[tabela.length - 1][1]);
        var segundaParte = (n * tabela[tabela.length - 1][3] - Math.pow(tabela[tabela.length - 1][0], 2)) *
            (n * tabela[tabela.length - 1][4] - Math.pow(tabela[tabela.length - 1][1], 2));
        result = (primeiraParte / Math.sqrt(segundaParte)).toFixed(4);

        a = parseFloat(((n * tabela[tabela.length - 1][2]) - (tabela[tabela.length - 1][0] * tabela[tabela.length - 1][1])) / (n * tabela[tabela.length - 1][3] - Math.pow(tabela[tabela.length - 1][0], 2))).toFixed(2);
        b = parseFloat((tabela[tabela.length - 1][1] / n) - a * (tabela[tabela.length - 1][0] / n)).toFixed(2);

        if (result > 0 ){
            var resultF = (result*100).toFixed();
        }
        else {
            var resultF = (result*-100).toFixed();
        }


        var retorno = mostrarTabela();
        if (0 < result && result < 0.3) {
            retorno += "Correlação inezistente à fraca <br>";
        } else if (0.3 >= result && result < 0.6) {
            retorno += "Resutado: " + resultF + '%' + "<br>";
            retorno += "Correlação fraca à média <br>";
        } else {
            retorno += "Resutado: " + resultF + '%' + "<br>";
            retorno += "Correlação média à forte <br>";
            
        }
        document.getElementById("resultadoCR").innerHTML = retorno;
    }

    var maior;
    var menor;
    var interrogacao;

    function calcularDistribuicaoUniforme() {

        maior = parseFloat(document.getElementById("du_maior").value);
        menor = parseFloat(document.getElementById("du_menor").value);


        var media = ((maior + menor) / 2);
        var varianca = (Math.pow((maior - menor), 2) / 12);
        var dp = Math.sqrt(varianca);
        var cv = (dp / media) * 100;

        var insert = "Média: " + media + "<br>";
        insert += "Variancia: " + varianca + "<br>";
        insert += "Desvio Padrão: " + dp + "<br>";
        insert += "CV: " + cv + "<br>";

        var tipo = "";
        $('input:radio[name=du_radio]').each(function () {
            if ($(this).is(':checked'))
                tipo = parseInt($(this).val());
        });

        var maiorQ = parseFloat(document.getElementById("du_maiorQ").value);
        var menorQ = parseFloat(document.getElementById("du_menorQ").value);

        if (tipo == 0) {
            interrogacao = maior - maiorQ;
        } else if (tipo == 1) {
            interrogacao = menorQ - menor;
        } else if (tipo == 2) {
            interrogacao = menorQ - maiorQ;
        }

        insert += "Interrogação: " + interrogacao + "<br>";
        prob = parseFloat(((1 / (maior - menor)) * interrogacao).toFixed(2));

        insert += "Probabilidade: " + prob;
        document.getElementById("resultadoDU").innerHTML = insert;
    }

    function montaGraficoDiscreta() {
        var titles = new Array();
        var datas = new Array();
        var bkColors = new Array();
        var bdColors = new Array();
        for (var i = 0; i < v_tabelaDiscreta.length; i++) {
            titles.push(v_tabelaDiscreta[i][0]);
            datas.push(v_tabelaDiscreta[i][1]);
            bkColors.push(backColors[i]);
            bdColors.push(borderColors[i]);
        }
        var barChartData = {
            labels: titles,
            datasets: [{
                label: '',
                borderWidth: 1,
                data: datas,
                backgroundColor: bkColors,
                borderColor: bdColors
            }]
        };

        var ctx = document.getElementById("canvasDiscreta").getContext("2d");
        window.myBar = new Chart(ctx, {
            type: 'bar',
            data: barChartData,
            options: {
                responsive: true,
                legend: {
                    position: 'top',
                },
                title: {
                    display: true,
                    text: 'Gráfico Variável Quantitativa Discreta'
                },
                scales: {
                    yAxes: [{
                        display: true,
                        ticks: {
                            suggestedMin: 0, // minimum will be 0, unless there is a lower value.
                            beginAtZero: true // minimum value will be 0.
                        }
                    }]
                }


            }
        });


    }

    function montaGraficoContinua() {
        var titles = new Array();
        var datas = new Array();
        var bkColors = new Array();
        var bdColors = new Array();


        var barChartData = {
            datasets: [],
            labels: []
        };

        for (var i = 0; i < v_tabelaContinua.length; i++) {
            for (var j = 0; j < v_tabelaContinua.length; j++) {
                if (j < i) {
                    datas.push(0);
                } else {
                    datas.push(v_tabelaContinua[i][4]);
                }
                bkColors.push(backColors[i]);
                bdColors.push(borderColors[i]);
            }
            barChartData.datasets.push({
                label: 'classe ' + (i + 1),
                borderWidth: 1,
                stack: 'Stack 0',
                data: datas,
                backgroundColor: bkColors,
                borderColor: bdColors
            });
            titles.push(v_tabelaContinua[i][0]);
            datas = [];
            bkColors = [];
            bdColors = [];
        }
        barChartData.labels = (titles);

        var ctx = document.getElementById("canvasContinua").getContext("2d");
        window.myBar = new Chart(ctx, {
            type: 'bar',
            data: barChartData,
            options: {
                title: {
                    display: true,
                    text: "Gráfico Variável Quantitativa Continua"
                },
                tooltips: {
                    mode: 'index',
                    intersect: false
                },
                responsive: true,
                scales: {
                    xAxes: [{
                        stacked: true,
                    }],
                    yAxes: [{
                        stacked: true,
                    }]
                }
            }
        });
    }

    function graficoCorrelacao() {
        var datas = [];
        var lines = [];
        var maior = tabela[1][tabela.length - 2];
        var menor = tabela[0][0];
        for (var i = 0; i < tabela.length - 1; i++) {
            datas.push({
                x: tabela[i][0],
                y: tabela[i][1],
                r: 10
            });
        }
        var reta_min = parseFloat(b) + (parseFloat(a) * menor);
        var reta_max = parseFloat(b) + (parseFloat(a) * maior);

        lines.push({
            x: menor,
            y: reta_min
        });
        lines.push({
            x: (tabela[tabela[0].length - 2][0]),
            y: reta_max
        });
        var myBubbleChart = {
            datasets: [{
                label: 'Dispersão',
                data: datas,
                backgroundColor: backColors[3],
                borderColor: borderColors[3]
            }, {
                label: 'Curva de Regressão',
                data: lines,
                type: 'line',
                fill: false,
                backgroundColor: backColors[4],
                borderColor: borderColors[4]
            }]
        };
        var ctx = document.getElementById("canvasCorrelacao").getContext("2d");
        window.myBar = new Chart(ctx, {
            type: 'bubble',
            data: myBubbleChart,
            options: {
                scales: {
                    xAxes: [{
                        type: 'linear',
                        position: 'bottom',
                    }]
                }
            }
        });
    }
</script>

<script type="text/javascript">
    $(document).ready(function () {
        $('.modal').modal();
        $('.collapsible').collapsible();
    });

    var backColors = [
        'rgba(255, 99, 132, 0.2)',
        'rgba(54, 162, 235, 0.2)',
        'rgba(255, 206, 86, 0.2)',
        'rgba(75, 192, 192, 0.2)',
        'rgba(153, 102, 255, 0.2)',
        'rgba(255, 159, 64, 0.2)'
    ];
    var borderColors = [
        'rgba(255,99,132,1)',
        'rgba(54, 162, 235, 1)',
        'rgba(255, 206, 86, 1)',
        'rgba(75, 192, 192, 1)',
        'rgba(153, 102, 255, 1)',
        'rgba(255, 159, 64, 1)'
    ];
</script>

<script type="text/javascript" src="js/materialize.js"></script>

</html>